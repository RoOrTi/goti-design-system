<!DOCTYPE html>
<html class="dark" lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Chat Center - GOTI</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400&amp;family=Noto+Sans:wght@400;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "background-light": "#f8f8f5",
                        "background-dark": "#102216",
                        "surface-dark": "#1c3024",
                    },
                    fontFamily: {
                        "display": ["Noto Serif", "serif"],
                        "sans": ["Noto Sans", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "2xl": "1rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        body {
            font-family: "Noto Serif", serif;
        }

        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.3s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body class="bg-background-light dark:bg-background-dark text-white">
    <div
        class="relative flex h-screen w-full flex-col overflow-hidden max-w-md mx-auto border-x border-white/5 bg-background-dark">
        <!-- TopAppBar -->
        <header class="flex items-center bg-background-dark p-4 pt-12 pb-4 border-b border-white/5">
            <div class="relative flex size-12 shrink-0 items-center justify-center">
                <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
                    data-alt="Portrait of designer Rodrigo"
                    style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuD8qH4mpAe3x7j3g9gxv3f2sptevXq2murSPoAODNGh24_ATiO4oPiU_FyW9kYqhaVROCPbUjjd2hI5-FdvJoJ0qhvliwwDZJvpd2DnmRGhVxO-3MJmKDqshRZC6PSyQZ79QCYswHoQkuijNGqxxoDg7gUIkuDBuImHo7D9YupLh5mbwpArLUTLVEhIuibWwiN60ZuxMaiJo3oi4TjeHe3j-ATjwufddVK336qbDY68YHw_noHdJRmVWr1ZSKb2NOuYUsQRdgYEMMY");'>
                </div>
                <div class="absolute bottom-1 right-1 size-3 bg-green-500 rounded-full border-2 border-background-dark">
                </div>
            </div>
            <div class="flex flex-col ml-3 flex-1">
                <h2 class="text-primary text-lg font-bold leading-tight tracking-[-0.015em] font-display">Rodrigo
                    Timoniuk</h2>
                <p class="text-[10px] text-white/40 uppercase tracking-widest font-sans">Soporte Financiero</p>
            </div>
            <div class="flex w-12 items-center justify-end">
                <button
                    class="flex cursor-pointer items-center justify-center rounded-lg h-10 w-10 bg-transparent text-white/60 hover:text-primary transition-colors">
                    <span class="material-symbols-outlined">more_vert</span>
                </button>
            </div>
        </header>
        <!-- Chat Area -->
        <div id="chatArea" class="flex-1 overflow-y-auto p-4 space-y-4 hide-scrollbar">
            <!-- Section Header -->
            <div class="py-2 text-center">
                <h4 class="text-white/20 text-[10px] uppercase font-bold tracking-[0.2em] font-sans">Sesión Segura • Hoy
                </h4>
            </div>
            <!-- Message: Bot -->
            <div class="flex items-end gap-3">
                <div class="bg-primary/20 rounded-full w-8 h-8 flex items-center justify-center shrink-0">
                    <span class="material-symbols-outlined text-primary text-sm">support_agent</span>
                </div>
                <div class="flex flex-1 flex-col gap-1 items-start">
                    <div
                        class="text-sm font-normal leading-relaxed max-w-[85%] rounded-2xl px-4 py-3 bg-surface-dark border border-white/5 text-white/90">
                        Hola Juan. ¿En qué puedo ayudarte con tus inversiones el día de hoy?
                    </div>
                </div>
            </div>
        </div>
        <!-- Input Area -->
        <div class="p-4 bg-background-dark border-t border-white/5 pb-10">
            <div class="flex items-center gap-3 bg-surface-dark/50 p-2 rounded-2xl border border-white/5">
                <button class="flex items-center justify-center text-primary ml-2">
                    <span class="material-symbols-outlined">add</span>
                </button>
                <input id="messageInput"
                    class="flex-1 bg-transparent border-none text-sm text-white/80 placeholder:text-white/20 focus:ring-0 font-sans"
                    placeholder="Escribe tu consulta..." type="text" />
                <button id="sendBtn"
                    class="bg-primary text-background-dark rounded-xl px-4 py-2 font-display font-bold text-xs uppercase transition-all active:scale-95">
                    Enviar
                </button>
            </div>
        </div>
    </div>

    <script src="../../goti_core.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const input = document.getElementById('messageInput');
            const sendBtn = document.getElementById('sendBtn');
            const chatArea = document.getElementById('chatArea');

            function addMessage(text, isUser = true) {
                const wrapper = document.createElement('div');
                wrapper.className = `flex ${isUser ? 'justify-end' : 'justify-start'} w-full animate-fade-in-up`;

                const html = isUser ? `
                <div class="max-w-[85%] rounded-2xl px-4 py-3 bg-primary text-background-dark font-bold text-sm shadow-lg shadow-primary/10">
                    ${text}
                </div>
            ` : `
                <div class="flex items-end gap-3">
                    <div class="bg-primary/20 rounded-full w-8 h-8 flex items-center justify-center shrink-0">
                        <span class="material-symbols-outlined text-primary text-sm">support_agent</span>
                    </div>
                    <div class="text-sm font-normal leading-relaxed max-w-[85%] rounded-2xl px-4 py-3 bg-surface-dark border border-white/5 text-white/90">
                        ${text}
                    </div>
                </div>
            `;

                wrapper.innerHTML = html;
                chatArea.appendChild(wrapper);
                chatArea.scrollTop = chatArea.scrollHeight;
            }

            function handleSend() {
                const text = input.value.trim();
                if (text) {
                    addMessage(text, true);
                    input.value = '';

                    // Simulated support delay
                    setTimeout(() => {
                        const responses = [
                            "Entendido. Estoy revisando el estado del mercado local por ti.",
                            "Esa operación requiere una validación adicional. ¿Deseas proceder?",
                            "He registrado tu consulta. Un asesor de cuenta se pondrá en contacto pronto.",
                            "Excelente elección. Los CEDEARs que mencionas están teniendo un volumen alto hoy."
                        ];
                        const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                        addMessage(randomResponse, false);
                    }, 1500);
                }
            }

            sendBtn.addEventListener('click', handleSend);
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') handleSend();
            });
        });
    </script>
</body>

</html>