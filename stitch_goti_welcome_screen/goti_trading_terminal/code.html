<!DOCTYPE html>
<html class="dark" lang="es">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Goti Trading Terminal - Technical Analysis</title>
    <!-- Material Symbols -->
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- ApexCharts -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#13ec5b",
                        "danger": "#ff4d4d",
                        "warning": "#f9d006",
                        "background": "#050705",
                        "surface": "#0d110d",
                        "border": "rgba(255,255,255,0.05)"
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"],
                        "mono": ["JetBrains Mono", "monospace"]
                    }
                },
            },
        }
    </script>
    <style>
        .terminal-grid {
            background-image:
                linear-gradient(rgba(19, 236, 91, 0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(19, 236, 91, 0.02) 1px, transparent 1px);
            background-size: 40px 40px;
        }

        .premium-border {
            border: 1px solid rgba(19, 236, 91, 0.1);
            box-shadow: 0 0 20px rgba(19, 236, 91, 0.03);
        }

        .side-panel {
            background: rgba(13, 17, 13, 0.8);
            backdrop-filter: blur(20px);
        }

        .active-asset {
            background: rgba(19, 236, 91, 0.1);
            border-color: rgba(19, 236, 91, 0.3);
            color: #13ec5b;
        }

        /* ApexCharts Customization */
        .apexcharts-tooltip {
            background: #0d110d !important;
            border: 1px solid rgba(19, 236, 91, 0.3) !important;
            color: white !important;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5) !important;
        }
    </style>
</head>

<body class="bg-background text-white font-display min-h-screen overflow-hidden terminal-grid">
    <!-- Top Navigation Bar -->
    <header class="h-16 border-b border-white/5 flex items-center justify-between px-6 side-panel sticky top-0 z-50">
        <div class="flex items-center gap-6">
            <button onclick="window.history.back()"
                class="flex items-center justify-center w-10 h-10 -ml-2 rounded-full hover:bg-white/10 transition-colors">
                <span class="material-symbols-outlined text-white">close</span>
            </button>
            <div class="flex items-center gap-2">
                <span class="material-symbols-outlined text-primary text-xl font-black">finance_chip</span>
                <h1 class="font-black text-lg tracking-tighter">GOTI <span class="text-primary/70">TERMINAL</span></h1>
            </div>
            <div class="h-6 w-px bg-white/10 hidden sm:block"></div>
            <div class="hidden sm:flex gap-4">
                <button
                    class="text-[10px] font-bold uppercase tracking-widest text-primary border-b-2 border-primary pb-1">Velas
                    (OHLC)</button>
                <button
                    class="text-[10px] font-bold uppercase tracking-widest text-white/40 hover:text-white transition-colors">Volatilidad</button>
                <button
                    class="text-[10px] font-bold uppercase tracking-widest text-white/40 hover:text-white transition-colors">Order
                    Book</button>
            </div>
        </div>
        <div class="flex items-center gap-4 font-mono">
            <div class="hidden md:flex flex-col items-end">
                <span class="text-[9px] text-white/30 uppercase">Market Health</span>
                <span class="text-[11px] text-primary font-bold">STABLE (0.42%)</span>
            </div>
            <div class="h-8 w-px bg-white/10 hidden md:block"></div>
            <div id="live-clock" class="text-sm font-bold text-white/80">00:00:00</div>
        </div>
    </header>

    <div class="flex h-[calc(100vh-4rem)]">
        <!-- Sidebar: Assets Selection -->
        <aside class="w-20 sm:w-64 border-r border-white/5 side-panel p-4 overflow-y-auto hidden xs:block">
            <div class="mb-6 px-2">
                <p class="text-[9px] uppercase font-black text-white/20 tracking-[0.2em] mb-4">Watchlist</p>
                <div class="space-y-2">
                    <div
                        class="active-asset border border-transparent p-3 rounded-xl flex justify-between items-center cursor-pointer transition-all">
                        <div>
                            <p class="font-black text-xs text-primary">GGAL</p>
                            <p class="text-[9px] opacity-60">Galicia ADR</p>
                        </div>
                        <span class="text-[11px] font-bold text-danger">-0.85%</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Chart Area -->
        <main class="flex-1 p-4 sm:p-6 relative overflow-hidden flex flex-col">
            <!-- Price Summary Bar -->
            <div
                class="flex items-center gap-4 sm:gap-8 mb-6 bg-white/5 p-4 rounded-2xl border border-white/5 overflow-x-auto no-scrollbar">
                <div class="min-w-fit">
                    <span class="text-[10px] text-white/30 uppercase font-black">Último Precio</span>
                    <p class="text-xl sm:text-2xl font-black text-white">$ 7.879<span
                            class="text-sm opacity-50">,43</span> <span
                            class="text-xs text-danger font-bold">-1.2%</span></p>
                </div>
                <div class="h-8 w-px bg-white/10"></div>
                <div>
                    <span class="text-[10px] text-white/30 uppercase font-black">Máximo</span>
                    <p class="text-sm font-bold">$ 8.058</p>
                </div>
                <div>
                    <span class="text-[10px] text-white/30 uppercase font-black">Mínimo</span>
                    <p class="text-sm font-bold">$ 7.658</p>
                </div>
            </div>

            <!-- The Big Chart Container -->
            <div class="flex-1 premium-border rounded-3xl bg-black/40 relative overflow-hidden">
                <div id="apex-main-chart" class="h-full w-full"></div>
            </div>

            <!-- Timeline Selector -->
            <div class="mt-6 flex justify-center gap-2">
                <button class="px-4 py-1.5 rounded-lg bg-primary/20 text-primary text-[10px] font-black">1H</button>
                <button class="px-4 py-1.5 rounded-lg hover:bg-white/5 text-white/40 text-[10px] font-black">1D</button>
                <button class="px-4 py-1.5 rounded-lg hover:bg-white/5 text-white/40 text-[10px] font-black">1W</button>
                <button class="px-4 py-1.5 rounded-lg hover:bg-white/5 text-white/40 text-[10px] font-black">1M</button>
            </div>
        </main>
    </div>

    <!-- Quick Trade Bar -->
    <footer class="fixed bottom-6 left-1/2 -translate-x-1/2 w-full max-w-2xl px-6 z-50">
        <div
            class="bg-surface/90 backdrop-blur-2xl border border-white/10 rounded-full h-16 sm:h-20 px-4 sm:px-8 flex items-center justify-between shadow-2xl overflow-hidden">
            <div class="flex items-center gap-2 sm:gap-6">
                <div class="hidden xs:block">
                    <span
                        class="text-[8px] font-black text-white/30 uppercase tracking-[0.2em] block mb-1">Activo</span>
                    <span class="text-xs font-black">GGAL</span>
                </div>
                <div class="flex gap-2">
                    <button
                        class="bg-primary text-background px-5 sm:px-8 py-2 sm:py-3 rounded-full font-black text-[10px] uppercase hover:scale-105 active:scale-95 transition-all shadow-[0_5px_15px_rgba(19,236,91,0.2)]">Comprar</button>
                    <button
                        class="bg-danger/20 text-danger border border-danger/30 px-5 sm:px-8 py-2 sm:py-3 rounded-full font-black text-[10px] uppercase hover:scale-105 active:scale-95 transition-all">Vender</button>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <div class="flex flex-col items-end">
                    <span class="text-[8px] font-black text-white/30 uppercase mb-1">Cantidad</span>
                    <input type="number" value="100"
                        class="w-16 bg-white/5 border-none text-right font-black text-sm focus:ring-1 focus:ring-primary rounded px-2 py-0.5 outline-none">
                </div>
                <button
                    class="material-symbols-outlined text-white/20 hover:text-white transition-colors p-2">settings</button>
            </div>
        </div>
    </footer>

    <script src="../../goti_config.js"></script>
    <script src="../../goti_auth.js"></script>
    <script src="../../goti_core.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ApexCharts configuration...
            const generateCandleData = () => {
                let data = [];
                let date = new Date('2025-11-20').getTime();
                const ggalProvided = [7958, 7879, 8058, 7834, 7658, 7700, 7850, 7920, 7800, 7750, 7880, 8020, 8100, 8050, 7980, 7850, 7720, 7680, 7790, 7860];

                for (let i = 0; i < ggalProvided.length; i++) {
                    let close = ggalProvided[i];
                    let open = i === 0 ? 8000 : ggalProvided[i - 1];
                    let high = Math.max(open, close) + Math.random() * 80;
                    let low = Math.min(open, close) - Math.random() * 80;

                    data.push({
                        x: new Date(date),
                        y: [open, high, low, close]
                    });
                    date += 3600000 * 4; // 4 hours step
                }
                return data;
            };

            const options = {
                series: [{
                    name: 'GGAL.BA Candle',
                    type: 'candlestick',
                    data: generateCandleData()
                }],
                chart: {
                    type: 'candlestick',
                    height: '100%',
                    background: 'transparent',
                    toolbar: { show: false },
                    animations: { enabled: true, easing: 'easeinout', speed: 800 },
                    foreColor: 'rgba(255,255,255,0.4)',
                    fontFamily: 'JetBrains Mono'
                },
                theme: { mode: 'dark' },
                xaxis: {
                    type: 'datetime',
                    axisBorder: { show: false },
                    axisTicks: { show: false }
                },
                yaxis: {
                    opposite: true,
                    axisBorder: { show: false },
                    axisTicks: { show: false },
                    labels: {
                        formatter: val => '$' + val.toLocaleString('es-AR')
                    }
                },
                grid: { borderColor: 'rgba(255,255,255,0.03)', strokeDashArray: 2 },
                plotOptions: {
                    candlestick: {
                        colors: { upward: '#13ec5b', downward: '#ff4d4d' },
                        wick: { useFillColor: true }
                    }
                }
            };

            const chart = new ApexCharts(document.querySelector("#apex-main-chart"), options);
            chart.render();

            // Clock functionality
            setInterval(() => {
                const el = document.getElementById('live-clock');
                if (el) el.textContent = new Date().toLocaleTimeString('es-AR', { hour12: false });
            }, 1000);
        });
    </script>

</body>

</html>